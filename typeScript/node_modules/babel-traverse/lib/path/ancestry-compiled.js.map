{"version":3,"sources":["ancestry.js"],"names":[],"mappings":"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","file":"ancestry-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.findParent = findParent;\nexports.find = find;\nexports.getFunctionParent = getFunctionParent;\nexports.getStatementParent = getStatementParent;\nexports.getEarliestCommonAncestorFrom = getEarliestCommonAncestorFrom;\nexports.getDeepestCommonAncestorFrom = getDeepestCommonAncestorFrom;\nexports.getAncestry = getAncestry;\nexports.isAncestor = isAncestor;\nexports.isDescendant = isDescendant;\nexports.inType = inType;\nexports.inShadow = inShadow;\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _index = require(\"./index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction findParent(callback) {\n  var path = this;\n  while (path = path.parentPath) {\n    if (callback(path)) return path;\n  }\n  return null;\n}\n\nfunction find(callback) {\n  var path = this;\n  do {\n    if (callback(path)) return path;\n  } while (path = path.parentPath);\n  return null;\n}\n\nfunction getFunctionParent() {\n  return this.findParent(function (path) {\n    return path.isFunction() || path.isProgram();\n  });\n}\n\nfunction getStatementParent() {\n  var path = this;\n  do {\n    if (Array.isArray(path.container)) {\n      return path;\n    }\n  } while (path = path.parentPath);\n}\n\nfunction getEarliestCommonAncestorFrom(paths) {\n  return this.getDeepestCommonAncestorFrom(paths, function (deepest, i, ancestries) {\n    var earliest = void 0;\n    var keys = t.VISITOR_KEYS[deepest.type];\n\n    for (var _iterator = ancestries, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var ancestry = _ref;\n\n      var path = ancestry[i + 1];\n\n      if (!earliest) {\n        earliest = path;\n        continue;\n      }\n\n      if (path.listKey && earliest.listKey === path.listKey) {\n        if (path.key < earliest.key) {\n          earliest = path;\n          continue;\n        }\n      }\n\n      var earliestKeyIndex = keys.indexOf(earliest.parentKey);\n      var currentKeyIndex = keys.indexOf(path.parentKey);\n      if (earliestKeyIndex > currentKeyIndex) {\n        earliest = path;\n      }\n    }\n\n    return earliest;\n  });\n}\n\nfunction getDeepestCommonAncestorFrom(paths, filter) {\n  var _this = this;\n\n  if (!paths.length) {\n    return this;\n  }\n\n  if (paths.length === 1) {\n    return paths[0];\n  }\n\n  var minDepth = Infinity;\n\n  var lastCommonIndex = void 0,\n      lastCommon = void 0;\n\n  var ancestries = paths.map(function (path) {\n    var ancestry = [];\n\n    do {\n      ancestry.unshift(path);\n    } while ((path = path.parentPath) && path !== _this);\n\n    if (ancestry.length < minDepth) {\n      minDepth = ancestry.length;\n    }\n\n    return ancestry;\n  });\n\n  var first = ancestries[0];\n\n  depthLoop: for (var i = 0; i < minDepth; i++) {\n    var shouldMatch = first[i];\n\n    for (var _iterator2 = ancestries, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var ancestry = _ref2;\n\n      if (ancestry[i] !== shouldMatch) {\n        break depthLoop;\n      }\n    }\n\n    lastCommonIndex = i;\n    lastCommon = shouldMatch;\n  }\n\n  if (lastCommon) {\n    if (filter) {\n      return filter(lastCommon, lastCommonIndex, ancestries);\n    } else {\n      return lastCommon;\n    }\n  } else {\n    throw new Error(\"Couldn't find intersection\");\n  }\n}\n\nfunction getAncestry() {\n  var path = this;\n  var paths = [];\n  do {\n    paths.push(path);\n  } while (path = path.parentPath);\n  return paths;\n}\n\nfunction isAncestor(maybeDescendant) {\n  return maybeDescendant.isDescendant(this);\n}\n\nfunction isDescendant(maybeAncestor) {\n  return !!this.findParent(function (parent) {\n    return parent === maybeAncestor;\n  });\n}\n\nfunction inType() {\n  var path = this;\n  while (path) {\n    for (var _iterator3 = arguments, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var type = _ref3;\n\n      if (path.node.type === type) return true;\n    }\n    path = path.parentPath;\n  }\n\n  return false;\n}\n\nfunction inShadow(key) {\n  var parentFn = this.isFunction() ? this : this.findParent(function (p) {\n    return p.isFunction();\n  });\n  if (!parentFn) return;\n\n  if (parentFn.isFunctionExpression() || parentFn.isFunctionDeclaration()) {\n    var shadow = parentFn.node.shadow;\n\n    if (shadow && (!key || shadow[key] !== false)) {\n      return parentFn;\n    }\n  } else if (parentFn.isArrowFunctionExpression()) {\n    return parentFn;\n  }\n\n  return null;\n}"]}