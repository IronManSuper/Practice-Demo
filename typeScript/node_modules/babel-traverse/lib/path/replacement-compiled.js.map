{"version":3,"sources":["replacement.js"],"names":[],"mappings":"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","file":"replacement-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.replaceWithMultiple = replaceWithMultiple;\nexports.replaceWithSourceString = replaceWithSourceString;\nexports.replaceWith = replaceWith;\nexports._replaceWith = _replaceWith;\nexports.replaceExpressionWithStatements = replaceExpressionWithStatements;\nexports.replaceInline = replaceInline;\n\nvar _babelCodeFrame = require(\"babel-code-frame\");\n\nvar _babelCodeFrame2 = _interopRequireDefault(_babelCodeFrame);\n\nvar _index = require(\"../index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require(\"./index\");\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _babylon = require(\"babylon\");\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hoistVariablesVisitor = {\n  Function: function Function(path) {\n    path.skip();\n  },\n  VariableDeclaration: function VariableDeclaration(path) {\n    if (path.node.kind !== \"var\") return;\n\n    var bindings = path.getBindingIdentifiers();\n    for (var key in bindings) {\n      path.scope.push({ id: bindings[key] });\n    }\n\n    var exprs = [];\n\n    for (var _iterator = path.node.declarations, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var declar = _ref;\n\n      if (declar.init) {\n        exprs.push(t.expressionStatement(t.assignmentExpression(\"=\", declar.id, declar.init)));\n      }\n    }\n\n    path.replaceWithMultiple(exprs);\n  }\n};\n\nfunction replaceWithMultiple(nodes) {\n  this.resync();\n\n  nodes = this._verifyNodeList(nodes);\n  t.inheritLeadingComments(nodes[0], this.node);\n  t.inheritTrailingComments(nodes[nodes.length - 1], this.node);\n  this.node = this.container[this.key] = null;\n  this.insertAfter(nodes);\n\n  if (this.node) {\n    this.requeue();\n  } else {\n    this.remove();\n  }\n}\n\nfunction replaceWithSourceString(replacement) {\n  this.resync();\n\n  try {\n    replacement = \"(\" + replacement + \")\";\n    replacement = (0, _babylon.parse)(replacement);\n  } catch (err) {\n    var loc = err.loc;\n    if (loc) {\n      err.message += \" - make sure this is an expression.\";\n      err.message += \"\\n\" + (0, _babelCodeFrame2.default)(replacement, loc.line, loc.column + 1);\n    }\n    throw err;\n  }\n\n  replacement = replacement.program.body[0].expression;\n  _index2.default.removeProperties(replacement);\n  return this.replaceWith(replacement);\n}\n\nfunction replaceWith(replacement) {\n  this.resync();\n\n  if (this.removed) {\n    throw new Error(\"You can't replace this node, we've already removed it\");\n  }\n\n  if (replacement instanceof _index4.default) {\n    replacement = replacement.node;\n  }\n\n  if (!replacement) {\n    throw new Error(\"You passed `path.replaceWith()` a falsy node, use `path.remove()` instead\");\n  }\n\n  if (this.node === replacement) {\n    return;\n  }\n\n  if (this.isProgram() && !t.isProgram(replacement)) {\n    throw new Error(\"You can only replace a Program root node with another Program node\");\n  }\n\n  if (Array.isArray(replacement)) {\n    throw new Error(\"Don't use `path.replaceWith()` with an array of nodes, use `path.replaceWithMultiple()`\");\n  }\n\n  if (typeof replacement === \"string\") {\n    throw new Error(\"Don't use `path.replaceWith()` with a source string, use `path.replaceWithSourceString()`\");\n  }\n\n  if (this.isNodeType(\"Statement\") && t.isExpression(replacement)) {\n    if (!this.canHaveVariableDeclarationOrExpression() && !this.canSwapBetweenExpressionAndStatement(replacement)) {\n      replacement = t.expressionStatement(replacement);\n    }\n  }\n\n  if (this.isNodeType(\"Expression\") && t.isStatement(replacement)) {\n    if (!this.canHaveVariableDeclarationOrExpression() && !this.canSwapBetweenExpressionAndStatement(replacement)) {\n      return this.replaceExpressionWithStatements([replacement]);\n    }\n  }\n\n  var oldNode = this.node;\n  if (oldNode) {\n    t.inheritsComments(replacement, oldNode);\n    t.removeComments(oldNode);\n  }\n\n  this._replaceWith(replacement);\n  this.type = replacement.type;\n\n  this.setScope();\n\n  this.requeue();\n}\n\nfunction _replaceWith(node) {\n  if (!this.container) {\n    throw new ReferenceError(\"Container is falsy\");\n  }\n\n  if (this.inList) {\n    t.validate(this.parent, this.key, [node]);\n  } else {\n    t.validate(this.parent, this.key, node);\n  }\n\n  this.debug(function () {\n    return \"Replace with \" + (node && node.type);\n  });\n\n  this.node = this.container[this.key] = node;\n}\n\nfunction replaceExpressionWithStatements(nodes) {\n  this.resync();\n\n  var toSequenceExpression = t.toSequenceExpression(nodes, this.scope);\n\n  if (t.isSequenceExpression(toSequenceExpression)) {\n    var exprs = toSequenceExpression.expressions;\n\n    if (exprs.length >= 2 && this.parentPath.isExpressionStatement()) {\n      this._maybePopFromStatements(exprs);\n    }\n\n    if (exprs.length === 1) {\n      this.replaceWith(exprs[0]);\n    } else {\n      this.replaceWith(toSequenceExpression);\n    }\n  } else if (toSequenceExpression) {\n    this.replaceWith(toSequenceExpression);\n  } else {\n    var container = t.functionExpression(null, [], t.blockStatement(nodes));\n    container.shadow = true;\n\n    this.replaceWith(t.callExpression(container, []));\n    this.traverse(hoistVariablesVisitor);\n\n    var completionRecords = this.get(\"callee\").getCompletionRecords();\n    for (var _iterator2 = completionRecords, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var path = _ref2;\n\n      if (!path.isExpressionStatement()) continue;\n\n      var loop = path.findParent(function (path) {\n        return path.isLoop();\n      });\n      if (loop) {\n        var callee = this.get(\"callee\");\n\n        var uid = callee.scope.generateDeclaredUidIdentifier(\"ret\");\n        callee.get(\"body\").pushContainer(\"body\", t.returnStatement(uid));\n\n        path.get(\"expression\").replaceWith(t.assignmentExpression(\"=\", uid, path.node.expression));\n      } else {\n        path.replaceWith(t.returnStatement(path.node.expression));\n      }\n    }\n\n    return this.node;\n  }\n}\n\nfunction replaceInline(nodes) {\n  this.resync();\n\n  if (Array.isArray(nodes)) {\n    if (Array.isArray(this.container)) {\n      nodes = this._verifyNodeList(nodes);\n      this._containerInsertAfter(nodes);\n      return this.remove();\n    } else {\n      return this.replaceWithMultiple(nodes);\n    }\n  } else {\n    return this.replaceWith(nodes);\n  }\n}"]}