{"version":3,"sources":["visitors.js"],"names":[],"mappings":"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","file":"visitors-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = require(\"babel-runtime/core-js/object/keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.explode = explode;\nexports.verify = verify;\nexports.merge = merge;\n\nvar _virtualTypes = require(\"./path/lib/virtual-types\");\n\nvar virtualTypes = _interopRequireWildcard(_virtualTypes);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction explode(visitor) {\n  if (visitor._exploded) return visitor;\n  visitor._exploded = true;\n\n  for (var nodeType in visitor) {\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    var parts = nodeType.split(\"|\");\n    if (parts.length === 1) continue;\n\n    var fns = visitor[nodeType];\n    delete visitor[nodeType];\n\n    for (var _iterator = parts, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var part = _ref;\n\n      visitor[part] = fns;\n    }\n  }\n\n  verify(visitor);\n\n  delete visitor.__esModule;\n\n  ensureEntranceObjects(visitor);\n\n  ensureCallbackArrays(visitor);\n\n  for (var _iterator2 = (0, _keys2.default)(visitor), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n    var _ref2;\n\n    if (_isArray2) {\n      if (_i2 >= _iterator2.length) break;\n      _ref2 = _iterator2[_i2++];\n    } else {\n      _i2 = _iterator2.next();\n      if (_i2.done) break;\n      _ref2 = _i2.value;\n    }\n\n    var _nodeType3 = _ref2;\n\n    if (shouldIgnoreKey(_nodeType3)) continue;\n\n    var wrapper = virtualTypes[_nodeType3];\n    if (!wrapper) continue;\n\n    var _fns2 = visitor[_nodeType3];\n    for (var type in _fns2) {\n      _fns2[type] = wrapCheck(wrapper, _fns2[type]);\n    }\n\n    delete visitor[_nodeType3];\n\n    if (wrapper.types) {\n      for (var _iterator4 = wrapper.types, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n        var _ref4;\n\n        if (_isArray4) {\n          if (_i4 >= _iterator4.length) break;\n          _ref4 = _iterator4[_i4++];\n        } else {\n          _i4 = _iterator4.next();\n          if (_i4.done) break;\n          _ref4 = _i4.value;\n        }\n\n        var _type = _ref4;\n\n        if (visitor[_type]) {\n          mergePair(visitor[_type], _fns2);\n        } else {\n          visitor[_type] = _fns2;\n        }\n      }\n    } else {\n      mergePair(visitor, _fns2);\n    }\n  }\n\n  for (var _nodeType in visitor) {\n    if (shouldIgnoreKey(_nodeType)) continue;\n\n    var _fns = visitor[_nodeType];\n\n    var aliases = t.FLIPPED_ALIAS_KEYS[_nodeType];\n\n    var deprecratedKey = t.DEPRECATED_KEYS[_nodeType];\n    if (deprecratedKey) {\n      console.trace(\"Visitor defined for \" + _nodeType + \" but it has been renamed to \" + deprecratedKey);\n      aliases = [deprecratedKey];\n    }\n\n    if (!aliases) continue;\n\n    delete visitor[_nodeType];\n\n    for (var _iterator3 = aliases, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var alias = _ref3;\n\n      var existing = visitor[alias];\n      if (existing) {\n        mergePair(existing, _fns);\n      } else {\n        visitor[alias] = (0, _clone2.default)(_fns);\n      }\n    }\n  }\n\n  for (var _nodeType2 in visitor) {\n    if (shouldIgnoreKey(_nodeType2)) continue;\n\n    ensureCallbackArrays(visitor[_nodeType2]);\n  }\n\n  return visitor;\n}\n\nfunction verify(visitor) {\n  if (visitor._verified) return;\n\n  if (typeof visitor === \"function\") {\n    throw new Error(messages.get(\"traverseVerifyRootFunction\"));\n  }\n\n  for (var nodeType in visitor) {\n    if (nodeType === \"enter\" || nodeType === \"exit\") {\n      validateVisitorMethods(nodeType, visitor[nodeType]);\n    }\n\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    if (t.TYPES.indexOf(nodeType) < 0) {\n      throw new Error(messages.get(\"traverseVerifyNodeType\", nodeType));\n    }\n\n    var visitors = visitor[nodeType];\n    if ((typeof visitors === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(visitors)) === \"object\") {\n      for (var visitorKey in visitors) {\n        if (visitorKey === \"enter\" || visitorKey === \"exit\") {\n          validateVisitorMethods(nodeType + \".\" + visitorKey, visitors[visitorKey]);\n        } else {\n          throw new Error(messages.get(\"traverseVerifyVisitorProperty\", nodeType, visitorKey));\n        }\n      }\n    }\n  }\n\n  visitor._verified = true;\n}\n\nfunction validateVisitorMethods(path, val) {\n  var fns = [].concat(val);\n  for (var _iterator5 = fns, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : (0, _getIterator3.default)(_iterator5);;) {\n    var _ref5;\n\n    if (_isArray5) {\n      if (_i5 >= _iterator5.length) break;\n      _ref5 = _iterator5[_i5++];\n    } else {\n      _i5 = _iterator5.next();\n      if (_i5.done) break;\n      _ref5 = _i5.value;\n    }\n\n    var fn = _ref5;\n\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"Non-function found defined in \" + path + \" with type \" + (typeof fn === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(fn)));\n    }\n  }\n}\n\nfunction merge(visitors) {\n  var states = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var wrapper = arguments[2];\n\n  var rootVisitor = {};\n\n  for (var i = 0; i < visitors.length; i++) {\n    var visitor = visitors[i];\n    var state = states[i];\n\n    explode(visitor);\n\n    for (var type in visitor) {\n      var visitorType = visitor[type];\n\n      if (state || wrapper) {\n        visitorType = wrapWithStateOrWrapper(visitorType, state, wrapper);\n      }\n\n      var nodeVisitor = rootVisitor[type] = rootVisitor[type] || {};\n      mergePair(nodeVisitor, visitorType);\n    }\n  }\n\n  return rootVisitor;\n}\n\nfunction wrapWithStateOrWrapper(oldVisitor, state, wrapper) {\n  var newVisitor = {};\n\n  var _loop = function _loop(key) {\n    var fns = oldVisitor[key];\n\n    if (!Array.isArray(fns)) return \"continue\";\n\n    fns = fns.map(function (fn) {\n      var newFn = fn;\n\n      if (state) {\n        newFn = function newFn(path) {\n          return fn.call(state, path, state);\n        };\n      }\n\n      if (wrapper) {\n        newFn = wrapper(state.key, key, newFn);\n      }\n\n      return newFn;\n    });\n\n    newVisitor[key] = fns;\n  };\n\n  for (var key in oldVisitor) {\n    var _ret = _loop(key);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return newVisitor;\n}\n\nfunction ensureEntranceObjects(obj) {\n  for (var key in obj) {\n    if (shouldIgnoreKey(key)) continue;\n\n    var fns = obj[key];\n    if (typeof fns === \"function\") {\n      obj[key] = { enter: fns };\n    }\n  }\n}\n\nfunction ensureCallbackArrays(obj) {\n  if (obj.enter && !Array.isArray(obj.enter)) obj.enter = [obj.enter];\n  if (obj.exit && !Array.isArray(obj.exit)) obj.exit = [obj.exit];\n}\n\nfunction wrapCheck(wrapper, fn) {\n  var newFn = function newFn(path) {\n    if (wrapper.checkPath(path)) {\n      return fn.apply(this, arguments);\n    }\n  };\n  newFn.toString = function () {\n    return fn.toString();\n  };\n  return newFn;\n}\n\nfunction shouldIgnoreKey(key) {\n  if (key[0] === \"_\") return true;\n\n  if (key === \"enter\" || key === \"exit\" || key === \"shouldSkip\") return true;\n\n  if (key === \"blacklist\" || key === \"noScope\" || key === \"skipKeys\") return true;\n\n  return false;\n}\n\nfunction mergePair(dest, src) {\n  for (var key in src) {\n    dest[key] = [].concat(dest[key] || [], src[key]);\n  }\n}"]}