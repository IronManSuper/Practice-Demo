{"version":3,"sources":["es7.observable.js"],"names":[],"mappings":"AAAA;AACA;;AACA,IAAI,UAAc,QAAQ,WAAR,CAAlB;AAAA,IACI,SAAc,QAAQ,WAAR,CADlB;AAAA,IAEI,OAAc,QAAQ,SAAR,CAFlB;AAAA,IAGI,YAAc,QAAQ,cAAR,GAHlB;AAAA,IAII,aAAc,QAAQ,QAAR,EAAkB,YAAlB,CAJlB;AAAA,IAKI,YAAc,QAAQ,eAAR,CALlB;AAAA,IAMI,WAAc,QAAQ,cAAR,CANlB;AAAA,IAOI,aAAc,QAAQ,gBAAR,CAPlB;AAAA,IAQI,cAAc,QAAQ,iBAAR,CARlB;AAAA,IASI,OAAc,QAAQ,SAAR,CATlB;AAAA,IAUI,QAAc,QAAQ,WAAR,CAVlB;AAAA,IAWI,SAAc,MAAM,MAXxB;;AAaA,IAAI,YAAY,SAAZ,SAAY,CAAS,EAAT,EAAY;AAC1B,SAAO,MAAM,IAAN,GAAa,SAAb,GAAyB,UAAU,EAAV,CAAhC;AACD,CAFD;;AAIA,IAAI,sBAAsB,SAAtB,mBAAsB,CAAS,YAAT,EAAsB;AAC9C,MAAI,UAAU,aAAa,EAA3B;AACA,MAAG,OAAH,EAAW;AACT,iBAAa,EAAb,GAAkB,SAAlB;AACA;AACD;AACF,CAND;;AAQA,IAAI,qBAAqB,SAArB,kBAAqB,CAAS,YAAT,EAAsB;AAC7C,SAAO,aAAa,EAAb,KAAoB,SAA3B;AACD,CAFD;;AAIA,IAAI,oBAAoB,SAApB,iBAAoB,CAAS,YAAT,EAAsB;AAC5C,MAAG,CAAC,mBAAmB,YAAnB,CAAJ,EAAqC;AACnC,iBAAa,EAAb,GAAkB,SAAlB;AACA,wBAAoB,YAApB;AACD;AACF,CALD;;AAOA,IAAI,eAAe,SAAf,YAAe,CAAS,QAAT,EAAmB,UAAnB,EAA8B;AAC/C,WAAS,QAAT;AACA,OAAK,EAAL,GAAU,SAAV;AACA,OAAK,EAAL,GAAU,QAAV;AACA,aAAW,IAAI,oBAAJ,CAAyB,IAAzB,CAAX;AACA,MAAI;AACF,QAAI,UAAe,WAAW,QAAX,CAAnB;AAAA,QACI,eAAe,OADnB;AAEA,QAAG,WAAW,IAAd,EAAmB;AACjB,UAAG,OAAO,QAAQ,WAAf,KAA+B,UAAlC,EAA6C,UAAU,mBAAU;AAAE,qBAAa,WAAb;AAA6B,OAAnD,CAA7C,KACK,UAAU,OAAV;AACL,WAAK,EAAL,GAAU,OAAV;AACD;AACF,GARD,CAQE,OAAM,CAAN,EAAQ;AACR,aAAS,KAAT,CAAe,CAAf;AACA;AACD,GAAC,IAAG,mBAAmB,IAAnB,CAAH,EAA4B,oBAAoB,IAApB;AAC/B,CAjBD;;AAmBA,aAAa,SAAb,GAAyB,YAAY,EAAZ,EAAgB;AACvC,eAAa,SAAS,WAAT,GAAsB;AAAE,sBAAkB,IAAlB;AAA0B;AADxB,CAAhB,CAAzB;;AAIA,IAAI,uBAAuB,SAAvB,oBAAuB,CAAS,YAAT,EAAsB;AAC/C,OAAK,EAAL,GAAU,YAAV;AACD,CAFD;;AAIA,qBAAqB,SAArB,GAAiC,YAAY,EAAZ,EAAgB;AAC/C,QAAM,SAAS,IAAT,CAAc,KAAd,EAAoB;AACxB,QAAI,eAAe,KAAK,EAAxB;AACA,QAAG,CAAC,mBAAmB,YAAnB,CAAJ,EAAqC;AACnC,UAAI,WAAW,aAAa,EAA5B;AACA,UAAI;AACF,YAAI,IAAI,UAAU,SAAS,IAAnB,CAAR;AACA,YAAG,CAAH,EAAK,OAAO,EAAE,IAAF,CAAO,QAAP,EAAiB,KAAjB,CAAP;AACN,OAHD,CAGE,OAAM,CAAN,EAAQ;AACR,YAAI;AACF,4BAAkB,YAAlB;AACD,SAFD,SAEU;AACR,gBAAM,CAAN;AACD;AACF;AACF;AACF,GAhB8C;AAiB/C,SAAO,SAAS,KAAT,CAAe,KAAf,EAAqB;AAC1B,QAAI,eAAe,KAAK,EAAxB;AACA,QAAG,mBAAmB,YAAnB,CAAH,EAAoC,MAAM,KAAN;AACpC,QAAI,WAAW,aAAa,EAA5B;AACA,iBAAa,EAAb,GAAkB,SAAlB;AACA,QAAI;AACF,UAAI,IAAI,UAAU,SAAS,KAAnB,CAAR;AACA,UAAG,CAAC,CAAJ,EAAM,MAAM,KAAN;AACN,cAAQ,EAAE,IAAF,CAAO,QAAP,EAAiB,KAAjB,CAAR;AACD,KAJD,CAIE,OAAM,CAAN,EAAQ;AACR,UAAI;AACF,4BAAoB,YAApB;AACD,OAFD,SAEU;AACR,cAAM,CAAN;AACD;AACF,KAAC,oBAAoB,YAApB;AACF,WAAO,KAAP;AACD,GAlC8C;AAmC/C,YAAU,SAAS,QAAT,CAAkB,KAAlB,EAAwB;AAChC,QAAI,eAAe,KAAK,EAAxB;AACA,QAAG,CAAC,mBAAmB,YAAnB,CAAJ,EAAqC;AACnC,UAAI,WAAW,aAAa,EAA5B;AACA,mBAAa,EAAb,GAAkB,SAAlB;AACA,UAAI;AACF,YAAI,IAAI,UAAU,SAAS,QAAnB,CAAR;AACA,gBAAQ,IAAI,EAAE,IAAF,CAAO,QAAP,EAAiB,KAAjB,CAAJ,GAA8B,SAAtC;AACD,OAHD,CAGE,OAAM,CAAN,EAAQ;AACR,YAAI;AACF,8BAAoB,YAApB;AACD,SAFD,SAEU;AACR,gBAAM,CAAN;AACD;AACF,OAAC,oBAAoB,YAApB;AACF,aAAO,KAAP;AACD;AACF;AApD8C,CAAhB,CAAjC;;AAuDA,IAAI,cAAc,SAAS,UAAT,CAAoB,UAApB,EAA+B;AAC/C,aAAW,IAAX,EAAiB,WAAjB,EAA8B,YAA9B,EAA4C,IAA5C,EAAkD,EAAlD,GAAuD,UAAU,UAAV,CAAvD;AACD,CAFD;;AAIA,YAAY,YAAY,SAAxB,EAAmC;AACjC,aAAW,SAAS,SAAT,CAAmB,QAAnB,EAA4B;AACrC,WAAO,IAAI,YAAJ,CAAiB,QAAjB,EAA2B,KAAK,EAAhC,CAAP;AACD,GAHgC;AAIjC,WAAS,SAAS,OAAT,CAAiB,EAAjB,EAAoB;AAC3B,QAAI,OAAO,IAAX;AACA,WAAO,KAAK,KAAK,OAAL,IAAgB,OAAO,OAA5B,EAAqC,UAAS,OAAT,EAAkB,MAAlB,EAAyB;AACnE,gBAAU,EAAV;AACA,UAAI,eAAe,KAAK,SAAL,CAAe;AAChC,cAAO,cAAS,KAAT,EAAe;AACpB,cAAI;AACF,mBAAO,GAAG,KAAH,CAAP;AACD,WAFD,CAEE,OAAM,CAAN,EAAQ;AACR,mBAAO,CAAP;AACA,yBAAa,WAAb;AACD;AACF,SAR+B;AAShC,eAAO,MATyB;AAUhC,kBAAU;AAVsB,OAAf,CAAnB;AAYD,KAdM,CAAP;AAeD;AArBgC,CAAnC;;AAwBA,YAAY,WAAZ,EAAyB;AACvB,QAAM,SAAS,IAAT,CAAc,CAAd,EAAgB;AACpB,QAAI,IAAI,OAAO,IAAP,KAAgB,UAAhB,GAA6B,IAA7B,GAAoC,WAA5C;AACA,QAAI,SAAS,UAAU,SAAS,CAAT,EAAY,UAAZ,CAAV,CAAb;AACA,QAAG,MAAH,EAAU;AACR,UAAI,aAAa,SAAS,OAAO,IAAP,CAAY,CAAZ,CAAT,CAAjB;AACA,aAAO,WAAW,WAAX,KAA2B,CAA3B,GAA+B,UAA/B,GAA4C,IAAI,CAAJ,CAAM,UAAS,QAAT,EAAkB;AACzE,eAAO,WAAW,SAAX,CAAqB,QAArB,CAAP;AACD,OAFkD,CAAnD;AAGD;AACD,WAAO,IAAI,CAAJ,CAAM,UAAS,QAAT,EAAkB;AAC7B,UAAI,OAAO,KAAX;AACA,gBAAU,YAAU;AAClB,YAAG,CAAC,IAAJ,EAAS;AACP,cAAI;AACF,gBAAG,MAAM,CAAN,EAAS,KAAT,EAAgB,UAAS,EAAT,EAAY;AAC7B,uBAAS,IAAT,CAAc,EAAd;AACA,kBAAG,IAAH,EAAQ,OAAO,MAAP;AACT,aAHE,MAGI,MAHP,EAGc;AACf,WALD,CAKE,OAAM,CAAN,EAAQ;AACR,gBAAG,IAAH,EAAQ,MAAM,CAAN;AACR,qBAAS,KAAT,CAAe,CAAf;AACA;AACD,WAAC,SAAS,QAAT;AACH;AACF,OAbD;AAcA,aAAO,YAAU;AAAE,eAAO,IAAP;AAAc,OAAjC;AACD,KAjBM,CAAP;AAkBD,GA5BsB;AA6BvB,MAAI,SAAS,EAAT,GAAa;AACf,SAAI,IAAI,IAAI,CAAR,EAAW,IAAI,UAAU,MAAzB,EAAiC,QAAQ,MAAM,CAAN,CAA7C,EAAuD,IAAI,CAA3D;AAA8D,YAAM,CAAN,IAAW,UAAU,GAAV,CAAX;AAA9D,KACA,OAAO,KAAK,OAAO,IAAP,KAAgB,UAAhB,GAA6B,IAA7B,GAAoC,WAAzC,EAAsD,UAAS,QAAT,EAAkB;AAC7E,UAAI,OAAO,KAAX;AACA,gBAAU,YAAU;AAClB,YAAG,CAAC,IAAJ,EAAS;AACP,eAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,MAAM,MAAzB,EAAiC,EAAE,CAAnC,EAAqC;AACnC,qBAAS,IAAT,CAAc,MAAM,CAAN,CAAd;AACA,gBAAG,IAAH,EAAQ;AACT,WAAC,SAAS,QAAT;AACH;AACF,OAPD;AAQA,aAAO,YAAU;AAAE,eAAO,IAAP;AAAc,OAAjC;AACD,KAXM,CAAP;AAYD;AA3CsB,CAAzB;;AA8CA,KAAK,YAAY,SAAjB,EAA4B,UAA5B,EAAwC,YAAU;AAAE,SAAO,IAAP;AAAc,CAAlE;;AAEA,QAAQ,QAAQ,CAAhB,EAAmB,EAAC,YAAY,WAAb,EAAnB;;AAEA,QAAQ,gBAAR,EAA0B,YAA1B","file":"es7.observable-compiled.js","sourcesContent":["'use strict';\n// https://github.com/zenparsing/es-observable\nvar $export     = require('./_export')\n  , global      = require('./_global')\n  , core        = require('./_core')\n  , microtask   = require('./_microtask')()\n  , OBSERVABLE  = require('./_wks')('observable')\n  , aFunction   = require('./_a-function')\n  , anObject    = require('./_an-object')\n  , anInstance  = require('./_an-instance')\n  , redefineAll = require('./_redefine-all')\n  , hide        = require('./_hide')\n  , forOf       = require('./_for-of')\n  , RETURN      = forOf.RETURN;\n\nvar getMethod = function(fn){\n  return fn == null ? undefined : aFunction(fn);\n};\n\nvar cleanupSubscription = function(subscription){\n  var cleanup = subscription._c;\n  if(cleanup){\n    subscription._c = undefined;\n    cleanup();\n  }\n};\n\nvar subscriptionClosed = function(subscription){\n  return subscription._o === undefined;\n};\n\nvar closeSubscription = function(subscription){\n  if(!subscriptionClosed(subscription)){\n    subscription._o = undefined;\n    cleanupSubscription(subscription);\n  }\n};\n\nvar Subscription = function(observer, subscriber){\n  anObject(observer);\n  this._c = undefined;\n  this._o = observer;\n  observer = new SubscriptionObserver(this);\n  try {\n    var cleanup      = subscriber(observer)\n      , subscription = cleanup;\n    if(cleanup != null){\n      if(typeof cleanup.unsubscribe === 'function')cleanup = function(){ subscription.unsubscribe(); };\n      else aFunction(cleanup);\n      this._c = cleanup;\n    }\n  } catch(e){\n    observer.error(e);\n    return;\n  } if(subscriptionClosed(this))cleanupSubscription(this);\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe(){ closeSubscription(this); }\n});\n\nvar SubscriptionObserver = function(subscription){\n  this._s = subscription;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      try {\n        var m = getMethod(observer.next);\n        if(m)return m.call(observer, value);\n      } catch(e){\n        try {\n          closeSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      }\n    }\n  },\n  error: function error(value){\n    var subscription = this._s;\n    if(subscriptionClosed(subscription))throw value;\n    var observer = subscription._o;\n    subscription._o = undefined;\n    try {\n      var m = getMethod(observer.error);\n      if(!m)throw value;\n      value = m.call(observer, value);\n    } catch(e){\n      try {\n        cleanupSubscription(subscription);\n      } finally {\n        throw e;\n      }\n    } cleanupSubscription(subscription);\n    return value;\n  },\n  complete: function complete(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      subscription._o = undefined;\n      try {\n        var m = getMethod(observer.complete);\n        value = m ? m.call(observer, value) : undefined;\n      } catch(e){\n        try {\n          cleanupSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      } cleanupSubscription(subscription);\n      return value;\n    }\n  }\n});\n\nvar $Observable = function Observable(subscriber){\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\n};\n\nredefineAll($Observable.prototype, {\n  subscribe: function subscribe(observer){\n    return new Subscription(observer, this._f);\n  },\n  forEach: function forEach(fn){\n    var that = this;\n    return new (core.Promise || global.Promise)(function(resolve, reject){\n      aFunction(fn);\n      var subscription = that.subscribe({\n        next : function(value){\n          try {\n            return fn(value);\n          } catch(e){\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x){\n    var C = typeof this === 'function' ? this : $Observable;\n    var method = getMethod(anObject(x)[OBSERVABLE]);\n    if(method){\n      var observable = anObject(method.call(x));\n      return observable.constructor === C ? observable : new C(function(observer){\n        return observable.subscribe(observer);\n      });\n    }\n    return new C(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          try {\n            if(forOf(x, false, function(it){\n              observer.next(it);\n              if(done)return RETURN;\n            }) === RETURN)return;\n          } catch(e){\n            if(done)throw e;\n            observer.error(e);\n            return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  },\n  of: function of(){\n    for(var i = 0, l = arguments.length, items = Array(l); i < l;)items[i] = arguments[i++];\n    return new (typeof this === 'function' ? this : $Observable)(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          for(var i = 0; i < items.length; ++i){\n            observer.next(items[i]);\n            if(done)return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  }\n});\n\nhide($Observable.prototype, OBSERVABLE, function(){ return this; });\n\n$export($export.G, {Observable: $Observable});\n\nrequire('./_set-species')('Observable');"]}